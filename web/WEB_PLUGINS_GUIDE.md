# Web æ’ä»¶ç³»ç»Ÿä½¿ç”¨æŒ‡å—

## å¿«é€Ÿå¼€å§‹

### 1. å¯åŠ¨ Web UI

```bash
npm run web
```

è®¿é—® http://localhost:3000

### 2. æ‰“å¼€æ’ä»¶ç®¡ç†

ç‚¹å‡»ä¾§è¾¹æ çš„æ’ä»¶å›¾æ ‡ï¼ˆğŸ”Œï¼‰æˆ–è®¿é—® `/plugins.html`

### 3. æ‰«ææ’ä»¶

ç‚¹å‡»"æ‰«ææ’ä»¶"æŒ‰é’®åŠ è½½æ‰€æœ‰å¯ç”¨æ’ä»¶

## æ’ä»¶ç®¡ç†åŠŸèƒ½

### æŸ¥çœ‹æ’ä»¶åˆ—è¡¨

æ‰€æœ‰æ’ä»¶ä»¥å¡ç‰‡å½¢å¼å±•ç¤ºï¼Œæ˜¾ç¤ºï¼š
- æ’ä»¶åç§°å’ŒçŠ¶æ€
- ç‰ˆæœ¬å·å’Œä½œè€…
- å¯ç”¨å‘½ä»¤
- æ“ä½œæŒ‰é’®

### æ’ä»¶çŠ¶æ€

| çŠ¶æ€ | è¯´æ˜ | å¯ç”¨æ“ä½œ |
|------|------|----------|
| æœªåŠ è½½ | æ’ä»¶å·²å‘ç°ä½†æœªåŠ è½½ | åŠ è½½ |
| å·²åŠ è½½ | æ’ä»¶å·²åŠ è½½åˆ°å†…å­˜ | å¯ç”¨ã€å¸è½½ |
| å·²å¯ç”¨ | æ’ä»¶æ­£åœ¨è¿è¡Œ | ç¦ç”¨ã€é‡æ–°åŠ è½½ |
| å·²ç¦ç”¨ | æ’ä»¶å·²åœæ­¢è¿è¡Œ | å¯ç”¨ã€å¸è½½ |
| é”™è¯¯ | æ’ä»¶åŠ è½½æˆ–è¿è¡Œå‡ºé”™ | é‡æ–°åŠ è½½ã€å¸è½½ |

### æ’ä»¶æ“ä½œ

**åŠ è½½æ’ä»¶**
- ç‚¹å‡»"åŠ è½½"æŒ‰é’®
- æ’ä»¶è¿›å…¥å†…å­˜çŠ¶æ€
- å¯ä»¥æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯

**å¯ç”¨æ’ä»¶**
- ç‚¹å‡»"å¯ç”¨"æŒ‰é’®
- æ’ä»¶å¼€å§‹è¿è¡Œ
- å‘½ä»¤å˜ä¸ºå¯ç”¨

**ç¦ç”¨æ’ä»¶**
- ç‚¹å‡»"ç¦ç”¨"æŒ‰é’®
- æ’ä»¶åœæ­¢è¿è¡Œ
- å‘½ä»¤ä¸å¯ç”¨

**é‡æ–°åŠ è½½æ’ä»¶**
- ç‚¹å‡»"é‡æ–°åŠ è½½"æŒ‰é’®
- å…ˆç¦ç”¨å†å¯ç”¨
- ç”¨äºæ›´æ–°æ’ä»¶ä»£ç 

**æŸ¥çœ‹è¯¦æƒ…**
- ç‚¹å‡»"è¯¦æƒ…"æŒ‰é’®
- æŸ¥çœ‹å®Œæ•´ä¿¡æ¯
- æŸ¥çœ‹æ‰€æœ‰å‘½ä»¤

## ä½¿ç”¨æ’ä»¶å‘½ä»¤

### æ–¹æ³•1ï¼šåœ¨èŠå¤©ç•Œé¢è¾“å…¥

åœ¨èŠå¤©è¾“å…¥æ¡†ä¸­ç›´æ¥è¾“å…¥å‘½ä»¤ï¼š

```
/timer 60 è®¡æ—¶å®Œæˆ
/weather åŒ—äº¬
```

### æ–¹æ³•2ï¼šé€šè¿‡ API è°ƒç”¨

```javascript
fetch('/api/commands/timer', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ args: '60 è®¡æ—¶å®Œæˆ' })
});
```

## å†…ç½®ç¤ºä¾‹æ’ä»¶

### 1. Timer Plugin (è®¡æ—¶å™¨)

**å‘½ä»¤**:
```
/timer <ç§’æ•°> [æç¤ºæ¶ˆæ¯]
```

**ç¤ºä¾‹**:
```
/timer 60 å€’è®¡æ—¶å®Œæˆ
```

**åŠŸèƒ½**:
- åˆ›å»ºå€’è®¡æ—¶å™¨
- æŒ‡å®šæ—¶é—´åå‘é€æé†’æ¶ˆæ¯

### 2. Weather Plugin (å¤©æ°”æŸ¥è¯¢)

**å‘½ä»¤**:
```
/weather <åŸå¸‚å>
```

**ç¤ºä¾‹**:
```
/weather åŒ—äº¬
/weather Tokyo
```

**åŠŸèƒ½**:
- æŸ¥è¯¢å®æ—¶å¤©æ°”
- æ˜¾ç¤ºæ¸©åº¦ã€å¤©æ°”çŠ¶å†µç­‰

## æ’ä»¶ API

### è·å–æ‰€æœ‰æ’ä»¶

```http
GET /api/plugins
```

å“åº”:
```json
{
  "success": true,
  "plugins": [
    {
      "id": "example-timer",
      "name": "example-timer",
      "version": "1.0.0",
      "description": "ç¤ºä¾‹è®¡æ—¶å™¨æ’ä»¶",
      "status": "enabled",
      "commands": ["/timer", "/timers"]
    }
  ]
}
```

### è·å–æ’ä»¶è¯¦æƒ…

```http
GET /api/plugins/:id
```

### åŠ è½½æ’ä»¶

```http
POST /api/plugins/:id/load
```

### å¯ç”¨æ’ä»¶

```http
POST /api/plugins/:id/enable
```

### ç¦ç”¨æ’ä»¶

```http
POST /api/plugins/:id/disable
```

### å¸è½½æ’ä»¶

```http
POST /api/plugins/:id/unload
```

### æ‰§è¡Œå‘½ä»¤

```http
POST /api/commands/:name
Content-Type: application/json

{
  "args": "å‘½ä»¤å‚æ•°"
}
```

### è·å–æ‰€æœ‰å‘½ä»¤

```http
GET /api/commands
```

å“åº”:
```json
{
  "success": true,
  "commands": [
    {
      "name": "/timer",
      "description": "åˆ›å»ºè®¡æ—¶å™¨",
      "usage": "/timer <seconds> [message]",
      "category": "utility",
      "plugin": "example-timer"
    }
  ]
}
```

## WebSocket äº‹ä»¶

### å®¢æˆ·ç«¯ç›‘å¬

```javascript
// æ’ä»¶åŠ è½½å®Œæˆ
socket.on('plugin:loaded', (data) => {
  console.log('æ’ä»¶å·²åŠ è½½:', data.id);
});

// æ’ä»¶å¯ç”¨
socket.on('plugin:enabled', (data) => {
  console.log('æ’ä»¶å·²å¯ç”¨:', data.id);
});

// æ’ä»¶ç¦ç”¨
socket.on('plugin:disabled', (data) => {
  console.log('æ’ä»¶å·²ç¦ç”¨:', data.id);
});

// æ’ä»¶å¸è½½
socket.on('plugin:unloaded', (data) => {
  console.log('æ’ä»¶å·²å¸è½½:', data.id);
});

// å‘½ä»¤æ‰§è¡Œ
socket.on('command:executed', (data) => {
  console.log('å‘½ä»¤å·²æ‰§è¡Œ:', data);
});
```

## å¼€å‘æ’ä»¶

è¯¦è§ [æ’ä»¶å¼€å‘æŒ‡å—](./PLUGIN_DEVELOPMENT.md)

### å¿«é€Ÿåˆ›å»ºæ’ä»¶

1. åœ¨ `plugins/` ç›®å½•åˆ›å»ºæ–‡ä»¶å¤¹
2. åˆ›å»º `package.json` å’Œ `index.js`
3. å®ç°æ’ä»¶ç±»
4. åœ¨ Web UI ä¸­æ‰«æå¹¶åŠ è½½

### æ’ä»¶æ¨¡æ¿

```javascript
import { BasePlugin } from '../../lib/plugins/plugin-system.js';

export default class MyPlugin extends BasePlugin {
  constructor(metadata, context) {
    super(metadata, context);

    this.commands = {
      '/mycommand': {
        handler: this.handleCommand.bind(this),
        description: 'å‘½ä»¤æè¿°',
        usage: '/mycommand <args>',
        category: 'utility'
      }
    };
  }

  async onEnable(context) {
    this.context.logger.info('æ’ä»¶å·²å¯ç”¨');
  }

  async onDisable(context) {
    this.context.logger.info('æ’ä»¶å·²ç¦ç”¨');
  }

  async handleCommand(args) {
    return {
      success: true,
      message: 'æ‰§è¡Œç»“æœ'
    };
  }
}
```

## æ•…éšœæ’é™¤

### æ’ä»¶æ— æ³•åŠ è½½

1. æ£€æŸ¥æ’ä»¶ç›®å½•ç»“æ„æ˜¯å¦æ­£ç¡®
2. æ£€æŸ¥ `package.json` æ ¼å¼
3. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯
4. æŸ¥çœ‹æœåŠ¡å™¨ç«¯æ—¥å¿—

### å‘½ä»¤æ— æ³•æ‰§è¡Œ

1. ç¡®è®¤æ’ä»¶å·²å¯ç”¨
2. æ£€æŸ¥å‘½ä»¤æ‹¼å†™
3. æŸ¥çœ‹å‘½ä»¤å‚æ•°æ˜¯å¦æ­£ç¡®

### WebSocket è¿æ¥å¤±è´¥

1. æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦è¿è¡Œ
2. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
3. æŸ¥çœ‹è¿æ¥çŠ¶æ€æŒ‡ç¤ºå™¨

## æœ€ä½³å®è·µ

1. **å®šæœŸæ‰«ææ’ä»¶** - æ·»åŠ æ–°æ’ä»¶åè®°å¾—æ‰«æ
2. **æ­£ç¡®ç¦ç”¨æ’ä»¶** - ä¸è¦ç›´æ¥å¸è½½è¿è¡Œä¸­çš„æ’ä»¶
3. **æŸ¥çœ‹æ—¥å¿—** - é‡åˆ°é—®é¢˜æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—
4. **å¤‡ä»½æ•°æ®** - é‡è¦ä¼šè¯åŠæ—¶å¯¼å‡º
5. **æ›´æ–°æ’ä»¶** - å®šæœŸé‡æ–°åŠ è½½æ›´æ–°æ’ä»¶

## æ”¯æŒå’Œåé¦ˆ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·ï¼š
- æŸ¥çœ‹ [æ’ä»¶å¼€å‘æ–‡æ¡£](./PLUGIN_DEVELOPMENT.md)
- æŸ¥çœ‹ [éƒ¨ç½²æ–‡æ¡£](./DEPLOYMENT.md)
- æäº¤ Issue æˆ– Pull Request
