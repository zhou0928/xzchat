# xzChat

<div align="center">

![NPM Version](https://img.shields.io/npm/v/xzchat?style=flat-square&color=blue)
![License](https://img.shields.io/npm/l/xzchat?style=flat-square&color=green)
![Node Version](https://img.shields.io/node/v/xzchat?style=flat-square)
![Downloads](https://img.shields.io/npm/dm/xzchat?style=flat-square)
![Build Status](https://img.shields.io/github/actions/workflow/status/zhou0928/xzchat/test.yml?style=flat-square)
![Coverage](https://img.shields.io/codecov/c/github/zhou0928/xzchat?style=flat-square)
![PRs Welcome](https://img.shields.io/badge/PRs-welcome-brightgreen.svg?style=flat-square)

**ğŸš€ å…¨èƒ½å‘½ä»¤è¡Œ AI åŠ©æ‰‹ï¼Œä¸“ä¸ºå¼€å‘è€…æ‰“é€ ã€‚**
**A powerful CLI chatbot based on NewAPI, designed for developers.**

[å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹-quick-start) â€¢ [æ ¸å¿ƒç‰¹æ€§](#-æ ¸å¿ƒç‰¹æ€§-features) â€¢ [ä½¿ç”¨æŒ‡å—](#-ä½¿ç”¨æŒ‡å—-usage) â€¢ [å‘½ä»¤é€ŸæŸ¥](#-å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥)

</div>

---

## ğŸ“– ç®€ä»‹ (Introduction)

**xzChat** æ˜¯ä¸€ä¸ªè¿è¡Œåœ¨ç»ˆç«¯çš„é«˜çº§ AI åŠ©æ‰‹ã€‚å®ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ªèŠå¤©æœºå™¨äººï¼Œæ›´æ˜¯ä½ çš„**ç»“å¯¹ç¼–ç¨‹ä¼™ä¼´**ã€‚
é€šè¿‡æ·±åº¦é›†æˆ Git å·¥ä½œæµã€RAG çŸ¥è¯†åº“ã€MCP åè®®ä»¥åŠè¯­éŸ³äº¤äº’ï¼ŒxzChat èƒ½å¤Ÿç†è§£ä½ çš„é¡¹ç›®ä¸Šä¸‹æ–‡ï¼ŒååŠ©ä½ å®Œæˆä»£ç ç¼–å†™ã€é‡æ„ã€æäº¤ä¿¡æ¯ç”Ÿæˆç­‰å¤æ‚ä»»åŠ¡ã€‚

> "ä½ çš„ç»ˆç«¯ï¼Œå€¼å¾—æ‹¥æœ‰ä¸€ä¸ªæ›´èªæ˜çš„å¤§è„‘ã€‚"

## âœ¨ æ ¸å¿ƒç‰¹æ€§ (Features)

*   **ğŸ¤– æ™ºèƒ½ä½“æ¨¡å¼ (Agent Mode)**
    *   é€šè¿‡ `/auto` å‘½ä»¤ï¼Œè®© AI è‡ªåŠ¨æ‹†è§£å¤æ‚ä»»åŠ¡ã€‚
    *   è‡ªåŠ¨ç¼–å†™ä»£ç ã€è¿è¡Œæµ‹è¯•ã€ä¿®å¤é”™è¯¯ï¼Œå®ç°ä»»åŠ¡é—­ç¯ã€‚
    *   æ”¯æŒæµè§ˆå™¨é¢„è§ˆç”Ÿæˆçš„ç½‘é¡µæ•ˆæœã€‚

*   **ğŸ§  RAG ä¸Šä¸‹æ–‡æ„ŸçŸ¥ (RAG & Context)**
    *   **è¯­ä¹‰æœç´¢**: ä½¿ç”¨ `/rag` å»ºç«‹æœ¬åœ°ä»£ç ç´¢å¼•ï¼Œæ”¯æŒè‡ªç„¶è¯­è¨€æœç´¢ï¼ˆå¦‚"è®¤è¯é€»è¾‘åœ¨å“ªé‡Œï¼Ÿ"ï¼‰ã€‚
    *   **é¡¹ç›®æ‰«æ**: `/scan` æ™ºèƒ½ç”Ÿæˆé¡¹ç›®ç»“æ„æ ‘ï¼Œè®© AI å¿«é€Ÿç†è§£é¡¹ç›®å…¨è²Œã€‚
    *   **æ–‡ä»¶åŠ è½½**: `/load` æ”¯æŒè¯»å– PDFã€æ–‡æœ¬æ–‡ä»¶ï¼Œç”šè‡³è‡ªåŠ¨å¤„ç†å¤§æ–‡ä»¶æ‘˜è¦ã€‚

*   **ğŸ› ï¸ Git æ·±åº¦é›†æˆ (Git Workflow)**
    *   **æ™ºèƒ½æäº¤**: `/commit` è‡ªåŠ¨åˆ†æ `git diff`ï¼Œç”Ÿæˆç¬¦åˆ [Conventional Commits](https://www.conventionalcommits.org/) è§„èŒƒçš„æäº¤ä¿¡æ¯ã€‚
    *   **ä»£ç å®¡æŸ¥**: `/review` å¯¹æš‚å­˜åŒºä»£ç è¿›è¡Œæ·±åº¦ AI Reviewï¼Œæå‰å‘ç°æ½œåœ¨ Bugã€‚
    *   **æäº¤å†å²**: `/git log` æŸ¥çœ‹æäº¤å†å²å¹¶è®© AI è§£é‡Šå˜æ›´ã€‚

*   **ğŸ”Œ æ— é™æ‰©å±• (MCP & Tools)**
    *   **MCP æ”¯æŒ**: å…¼å®¹ **Model Context Protocol**ï¼Œå¯è¿æ¥æœ¬åœ°æ•°æ®åº“ã€Slackã€Notion ç­‰å¤–éƒ¨å·¥å…·ã€‚
    *   **è¯­éŸ³äº¤äº’**: `/voice` (Whisper) å’Œ `/tts` (OpenAI TTS) å®ç°å®Œå…¨çš„è¯­éŸ³å¯¹è¯ä½“éªŒã€‚
    *   **å¤šç¯å¢ƒç®¡ç†**: é€šè¿‡ `/profile` å’Œ `/session` è½»æ¾åˆ‡æ¢å·¥ä½œ/ä¸ªäººç¯å¢ƒåŠå¯¹è¯å†å²ã€‚

*   **ğŸ¯ å¢å¼ºçš„ä¼šè¯ç®¡ç† (Session Management)**
    *   **ä¼šè¯æœç´¢**: `/session search` åœ¨æ‰€æœ‰å†å²ä¼šè¯ä¸­æœç´¢å…³é”®è¯ã€‚
    *   **ä¼šè¯å…‹éš†**: `/session clone` å¤åˆ¶ç°æœ‰ä¼šè¯åˆ›å»ºæ–°çš„æ¢ç´¢åˆ†æ”¯ã€‚
    *   **æ’¤é”€é‡åš**: `/undo` æ’¤é”€æœ€åä¸€æ¡æ¶ˆæ¯ï¼Œ`/retry` é‡æ–°ç”Ÿæˆå›å¤ã€‚
    *   **ç»§ç»­ç”Ÿæˆ**: `/continue` è®© AI ç»§ç»­æœªå®Œæˆçš„è¾“å‡ºã€‚
    *   **ç¼–è¾‘æ¶ˆæ¯**: `/edit` ä¿®æ”¹å·²å‘é€çš„æ¶ˆæ¯ã€‚

*   **ğŸ”’ å®‰å…¨æ€§å¢å¼º (Security)**
    *   **æ•æ„Ÿä¿¡æ¯è¿‡æ»¤**: è‡ªåŠ¨æ£€æµ‹å’Œè¿‡æ»¤ API Key ç­‰æ•æ„Ÿä¿¡æ¯ã€‚
    *   **è·¯å¾„éªŒè¯**: é˜²æ­¢è·¯å¾„éå†æ”»å‡»ã€‚
    *   **å‘½ä»¤éªŒè¯**: æ£€æµ‹å±é™©å‘½ä»¤ï¼ˆå¦‚ `rm -rf /`ï¼‰ã€‚
    *   **æ–‡ä»¶è­¦å‘Š**: è®¿é—®æ•æ„Ÿæ–‡ä»¶æ—¶ç»™å‡ºè­¦å‘Šæç¤ºã€‚

*   **ğŸ“Š æ—¥å¿—ä¸ç›‘æ§ (Logging & Monitoring)**
    *   **ç»“æ„åŒ–æ—¥å¿—**: å¯é…ç½®çš„æ—¥å¿—çº§åˆ«ï¼ˆDEBUG/INFO/WARN/ERRORï¼‰ã€‚
    *   **è‡ªåŠ¨å½’æ¡£**: æ—¥å¿—æŒ‰æ—¥æœŸè‡ªåŠ¨å½’æ¡£å­˜å‚¨ã€‚
    *   **é”™è¯¯è¿½è¸ª**: è¯¦ç»†çš„é”™è¯¯ä¸Šä¸‹æ–‡å’Œå †æ ˆè·Ÿè¸ªã€‚
    *   **å®¡è®¡æ—¥å¿—**: å®Œæ•´çš„æ“ä½œè®°å½•å’Œå®¡è®¡ç³»ç»Ÿã€‚

*   **ğŸ§© ä¼ä¸šçº§æ’ä»¶ç³»ç»Ÿ (Plugin System)**
    *   **æ¨¡å—åŒ–æ¶æ„**: æ”¯æŒåŠ¨æ€åŠ è½½/å¸è½½æ’ä»¶ï¼Œçƒ­æ›´æ–°ã€‚
    *   **å®Œæ•´éªŒè¯**: 6 å¤§éªŒè¯æ¨¡å—ï¼ˆå…ƒæ•°æ®/ä»£ç /å®‰å…¨/æ€§èƒ½/ä¾èµ–/é…ç½®ï¼‰ï¼Œ0-100 åˆ†è¯„åˆ†ã€‚
    *   **æ™ºèƒ½ç¼“å­˜**: LRU ç¼“å­˜ + TTL è¿‡æœŸ + ç£ç›˜æŒä¹…åŒ–ï¼Œæ€§èƒ½æå‡ 50-80%ã€‚
    *   **ç»Ÿä¸€é”™è¯¯å¤„ç†**: 14 ç§é”™è¯¯ç±»å‹ï¼Œå¿«é€Ÿå®šä½é—®é¢˜ã€‚
    *   **ä¾èµ–ç®¡ç†**: è‡ªåŠ¨è§£æä¾èµ–å…³ç³»ã€å¾ªç¯ä¾èµ–æ£€æµ‹ã€æ‹“æ‰‘æ’åºã€‚
    *   **æ’ä»¶å¸‚åœº**: æœç´¢ã€å®‰è£…ã€æ›´æ–°æ’ä»¶ï¼Œæ”¯æŒåˆ†ç±»å’Œè¯„åˆ†ã€‚
    *   **ç‰ˆæœ¬æ§åˆ¶**: è‡ªåŠ¨å¤‡ä»½ã€ç‰ˆæœ¬æ¢å¤ã€SHA256 å®Œæ•´æ€§éªŒè¯ã€‚
    *   **æ€§èƒ½ç›‘æ§**: å®æ—¶æŒ‡æ ‡ã€æ…¢æ“ä½œæ£€æµ‹ã€æ€§èƒ½æŠ¥å‘Šã€å¼‚æ­¥ç›‘æ§ã€‚
    *   **TypeScript æ”¯æŒ**: å®Œæ•´ç±»å‹å®šä¹‰ï¼ˆ30+ æ¥å£ï¼‰ã€‚
    *   **é«˜æµ‹è¯•è¦†ç›–**: 58+ å•å…ƒæµ‹è¯•ç”¨ä¾‹ã€‚

*   **ğŸŒ³ åˆ†æ”¯ç³»ç»Ÿ (Branch System)**
    *   **åˆ†æ”¯åˆ›å»º**: ä»ä»»æ„æ¶ˆæ¯ç‚¹åˆ›å»ºå¯¹è¯åˆ†æ”¯ã€‚
    *   **åˆ†æ”¯ç®¡ç†**: åˆ—å‡ºã€åˆ‡æ¢ã€åˆ é™¤åˆ†æ”¯ã€‚
    *   **åˆ†æ”¯æ¯”è¾ƒ**: å¯¹æ¯”ä¸åŒåˆ†æ”¯çš„å·®å¼‚ã€‚
    *   **åˆ†æ”¯åˆå¹¶**: å°†åˆ†æ”¯åˆå¹¶å›ä¸»ä¼šè¯ã€‚
    *   **åˆ†æ”¯æ ‘**: å¯è§†åŒ–æŸ¥çœ‹åˆ†æ”¯ç»“æ„ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹ (Quick Start)

### ç¯å¢ƒè¦æ±‚ (Prerequisites)
- **Node.js**: >= 18.0.0
- **Git**: (æ¨è) ç”¨äºç‰ˆæœ¬æ§åˆ¶åŠŸèƒ½

### å®‰è£… (Installation)

```bash
# ä½¿ç”¨ npm å…¨å±€å®‰è£…
npm install -g xzChat

# æˆ–è€…ç›´æ¥ä½¿ç”¨ npx è¿è¡Œ (å…å®‰è£…)
npx xzChat
```

### åˆå§‹åŒ– (Initialization)

åœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œï¼š

```bash
xzChat init
```
è¿™å°†ç”Ÿæˆ `.newapi-chat-config.json` é…ç½®æ–‡ä»¶ã€‚

## âš™ï¸ é…ç½® (Configuration)

å¯åŠ¨å·¥å…·åï¼Œæ”¯æŒé€šè¿‡å‘½ä»¤åŠ¨æ€ä¿®æ”¹é…ç½®ï¼Œå³æ—¶ç”Ÿæ•ˆï¼š

```bash
# 1. è®¾ç½® API Key (æ”¯æŒ OpenAI, Anthropic, DeepSeek ç­‰)
/config apiKey sk-xxxxxxxxxxxxxxxxxxxx

# 2. è®¾ç½® Base URL (å¦‚æœä½ ä½¿ç”¨ä¸­è½¬æœåŠ¡)
/config baseUrl https://api.openai.com/v1

# 3. åˆ‡æ¢æ¨¡å‹
/config model gpt-4o

# 4. (å¯é€‰) åˆ‡æ¢é¢„è®¾ç¯å¢ƒ
/profile use work
```

### ç¯å¢ƒå˜é‡æ”¯æŒ

```bash
# é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰
export XZCHAT_API_KEY="sk-..."
export XZCHAT_BASE_URL="https://api.example.com/v1"
export XZCHAT_MODEL="gpt-4o"
export XZCHAT_LOG_LEVEL="DEBUG"
```

## ğŸ“– ä½¿ç”¨æŒ‡å— (Usage)

å¯åŠ¨å·¥å…·åï¼Œä½ å°†çœ‹åˆ° `å°å‘¨>` æç¤ºç¬¦ã€‚è¾“å…¥ `/help` å¯æŸ¥çœ‹ç‚«å½©å¸®åŠ©èœå•ã€‚

### åœºæ™¯ 1ï¼šæ—¥å¸¸ç»“å¯¹ç¼–ç¨‹
```bash
å°å‘¨> è¿™ä¸ªå‡½æ•°çš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘ï¼Ÿèƒ½ä¼˜åŒ–å—ï¼Ÿ
å°å‘¨> å¸®æˆ‘å†™ä¸€ä¸ª React ç»„ä»¶ï¼ŒåŒ…å« loading çŠ¶æ€å’Œé”™è¯¯å¤„ç†
```

### åœºæ™¯ 2ï¼šå…¨è‡ªåŠ¨æ™ºèƒ½ä½“
```bash
å°å‘¨> /auto å¸®æˆ‘åˆ›å»ºä¸€ä¸ªè´ªåƒè›‡æ¸¸æˆ
# AI å°†è‡ªåŠ¨ï¼š
# 1. è§„åˆ’æ­¥éª¤
# 2. åˆ›å»º index.html, style.css, script.js
# 3. å†™å…¥ä»£ç 
# 4. è¯¢é—®æ˜¯å¦é¢„è§ˆ
```

### åœºæ™¯ 3ï¼šGit æäº¤åŠ©æ‰‹
```bash
# å½“ä½ å®Œæˆäº†ä»£ç ä¿®æ”¹å¹¶ git add å
å°å‘¨> /commit

# AI è¾“å‡ºç¤ºä¾‹ï¼š
# feat(auth): å¢åŠ  JWT ç™»å½•éªŒè¯é€»è¾‘
# fix(ui): ä¿®å¤ç§»åŠ¨ç«¯å¯¼èˆªæ é‡å é—®é¢˜
```

### åœºæ™¯ 4ï¼šåˆ†æ”¯æ¢ç´¢ï¼ˆæ–°åŠŸèƒ½ï¼‰
```bash
# æƒ³æ¢ç´¢ä¸åŒçš„å®ç°æ–¹æ¡ˆï¼Ÿåˆ›å»ºåˆ†æ”¯ï¼
å°å‘¨> /branch create å°è¯•ä½¿ç”¨ TypeScript é‡æ„
âœ… åˆ†æ”¯å·²åˆ›å»º: branch_xxx

# åœ¨åˆ†æ”¯ä¸­ç»§ç»­è®¨è®º
å°å‘¨> å¸®æˆ‘æŠŠè¿™ä¸ªå‡½æ•°æ”¹ç”¨ TypeScript
...

# æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯
å°å‘¨> /branch list

# åˆ‡æ¢å›ä¸»åˆ†æ”¯
å°å‘¨> /branch switch main-session-id

# åˆ›å»ºå¦ä¸€ä¸ªåˆ†æ”¯å°è¯•å…¶ä»–æ–¹æ¡ˆ
å°å‘¨> /branch create ä½¿ç”¨æ›¿ä»£æ–¹æ¡ˆ

# æ¯”è¾ƒä¸¤ä¸ªåˆ†æ”¯çš„å·®å¼‚
å°å‘¨> /branch compare branch_1 branch_2

# é€‰æ‹©æœ€ä½³æ–¹æ¡ˆåˆå¹¶å›ä¸»åˆ†æ”¯
å°å‘¨> /branch merge branch_1 main-session-id
```

### åœºæ™¯ 5ï¼šçŸ¥è¯†åº“é—®ç­” (RAG)
```bash
# 1. ä¸ºå½“å‰é¡¹ç›®å»ºç«‹ç´¢å¼•
å°å‘¨> /rag index

# 2. åŸºäºä»£ç åº“å›ç­”é—®é¢˜
å°å‘¨> /rag search ç”¨æˆ·ç™»å½•åçš„ Token æ˜¯å¦‚ä½•å­˜å‚¨çš„ï¼Ÿ
```

### åœºæ™¯ 6ï¼šä¼šè¯ç®¡ç†
```bash
# æœç´¢æ‰€æœ‰å†å²ä¼šè¯
å°å‘¨> /session search ç”¨æˆ·ç™»å½•

# å…‹éš†å½“å‰ä¼šè¯åˆ›å»ºå®éªŒåˆ†æ”¯
å°å‘¨> /session clone default experiment

# æ’¤é”€ä¸Šä¸€æ¡æ¶ˆæ¯
å°å‘¨> /undo

# é‡æ–°ç”Ÿæˆ AI å›å¤
å°å‘¨> /retry

# è®© AI ç»§ç»­ç”Ÿæˆ
å°å‘¨> /continue
```

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥

### åŸºç¡€å‘½ä»¤
| å‘½ä»¤ | åˆ«å | è¯´æ˜ |
|------|------|------|
| `/help` | `/?` | æŸ¥çœ‹å¸®åŠ©èœå• |
| `/config <key> <value>` | `/é…ç½®` | æŸ¥çœ‹æˆ–ä¿®æ”¹é…ç½® |
| `/init` | `/åˆå§‹åŒ–é…ç½®` | åˆå§‹åŒ–é¡¹ç›®é…ç½® |
| `/profile` | `/åˆ‡æ¢æ¨¡å‹` | åˆ‡æ¢é…ç½®ç¯å¢ƒ |
| `/system <prompt>` | - | è®¾ç½®ç³»ç»Ÿæç¤ºè¯ |
| `/clear` | - | æ¸…ç©ºå½“å‰å¯¹è¯å†å² |
| `/exit` | `/quit` | é€€å‡ºç¨‹åº (ä¼šæœ‰éšæœºå‘Šåˆ«è¯­å“¦ğŸ‘‹) |

### æ–‡ä»¶æ“ä½œ
| å‘½ä»¤ | åˆ«å | è¯´æ˜ |
|------|------|------|
| `/scan` | `/å½“å‰é¡¹ç›®ç»“æ„` | æ‰«æå¹¶å‘é€é¡¹ç›®ç›®å½•ç»“æ„ |
| `/load <file>` | - | åŠ è½½æ–‡ä»¶å†…å®¹åˆ°ä¸Šä¸‹æ–‡ |
| `/optimize <file>` | `/opt` | æ·±åº¦åˆ†æå¹¶ä¼˜åŒ–æŒ‡å®šæ–‡ä»¶ |
| `/open <file>` | - | ä½¿ç”¨ç³»ç»Ÿé»˜è®¤ç¨‹åºæ‰“å¼€æ–‡ä»¶ |
| `/save [index] <filename>` | - | ä¿å­˜ AI ä»£ç å— |
| `/paste` | - | å¤šè¡Œç²˜è´´æ¨¡å¼ |
| `/editor` | - | è°ƒç”¨ç³»ç»Ÿç¼–è¾‘å™¨è¾“å…¥å¤šè¡Œå†…å®¹ |

### ä¼šè¯ç®¡ç†
| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `/session` | ç®¡ç†å¤šä¼šè¯ (list/use/new/delete/clone/search) |
| `/session list` | æŸ¥çœ‹æ‰€æœ‰ä¼šè¯ |
| `/session use <name>` | åˆ‡æ¢åˆ°æŒ‡å®šä¼šè¯ |
| `/session new <name>` | åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æ–°ä¼šè¯ |
| `/session clone <src> <tgt>` | å…‹éš†ä¼šè¯ |
| `/session search <keyword>` | æœç´¢æ‰€æœ‰ä¼šè¯ä¸­çš„å†…å®¹ |
| `/session delete <name>` | åˆ é™¤ä¼šè¯ |

### å¯¹è¯æ§åˆ¶ (æ–°å¢)
| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `/undo` | æ’¤é”€æœ€åä¸€æ¡æ¶ˆæ¯ |
| `/retry` | é‡æ–°ç”Ÿæˆ AI çš„å›å¤ |
| `/continue` | è®© AI ç»§ç»­ç”Ÿæˆï¼ˆç±»ä¼¼ ChatGPT çš„ç»§ç»­ç”Ÿæˆï¼‰ |
| `/edit <index>` | ç¼–è¾‘æŒ‡å®šç´¢å¼•çš„æ¶ˆæ¯ |
| `/history` | æŸ¥çœ‹æœ€è¿‘çš„å†å²è®°å½• |

### Git é›†æˆ
| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `/commit` | ç”Ÿæˆ Git Commit Message |
| `/review` | å¯¹æš‚å­˜åŒºä»£ç è¿›è¡Œ AI Code Review |
| `/git log` | æŸ¥çœ‹æäº¤å†å²å¹¶è®© AI è§£é‡Š |

### é«˜çº§åŠŸèƒ½
| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `/mcp` | ç®¡ç† MCP æœåŠ¡å™¨ |
| `/auto <task>` | è¿›å…¥æ™ºèƒ½ä½“æ¨¡å¼ (Agent Mode) |
| `/compress` | å‹ç¼©å¯¹è¯å†å² |
| `/token` | ä¼°ç®— Token æ¶ˆè€— |
| `/copy [code]` | å¤åˆ¶ä¸Šä¸€æ¬¡ AI å›å¤çš„ä»£ç æˆ–å†…å®¹ |
| `/models` | åˆ—å‡ºå½“å‰æ¥å£å¯ç”¨æ¨¡å‹ |
| `/role <name>` | åˆ‡æ¢æˆ–ç®¡ç†è§’è‰²é¢„è®¾ |
| `/think [on|off]` | å¼€å¯/å…³é—­ DeepSeek æ€è€ƒè¿‡ç¨‹æ˜¾ç¤º |
| `/tts [text]` | å¼€å¯/å…³é—­è¯­éŸ³æœ—è¯» |
| `/rag` | çŸ¥è¯†åº“æ“ä½œ (index/search) |
| `/voice` | å¼€å¯è¯­éŸ³è¾“å…¥ (éœ€å®‰è£… sox) |

### æ’ä»¶ç³»ç»Ÿï¼ˆå…¨æ–°åŠŸèƒ½ï¼‰
| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `/plugin` | æ’ä»¶ç®¡ç†ä¸»å‘½ä»¤ |
| `/plugin list` | åˆ—å‡ºæ‰€æœ‰æ’ä»¶ |
| `/plugin load <name>` | åŠ è½½æŒ‡å®šæ’ä»¶ |
| `/plugin unload <name>` | å¸è½½æ’ä»¶ |
| `/plugin reload <name>` | é‡æ–°åŠ è½½æ’ä»¶ |
| `/plugin enable <name>` | å¯ç”¨æ’ä»¶ |
| `/plugin disable <name>` | ç¦ç”¨æ’ä»¶ |
| `/plugin info <name>` | æŸ¥çœ‹æ’ä»¶è¯¦ç»†ä¿¡æ¯ |
| `/plugin search <query>` | æœç´¢å¯ç”¨æ’ä»¶ï¼ˆæ’ä»¶å¸‚åœºï¼‰ |
| `/plugin install <name>` | ä»æ’ä»¶å¸‚åœºå®‰è£…æ’ä»¶ |
| `/plugin validate <name>` | éªŒè¯æ’ä»¶è´¨é‡ |

**æ’ä»¶ç³»ç»Ÿç‰¹æ€§**ï¼š
- ğŸ—ï¸ **æ¨¡å—åŒ–æ¶æ„** - æ”¯æŒåŠ¨æ€åŠ è½½/å¸è½½æ’ä»¶
- âœ… **å®Œæ•´éªŒè¯ä½“ç³»** - 6 å¤§éªŒè¯æ¨¡å—ï¼Œ0-100 åˆ†è¯„åˆ†
- ğŸš€ **æ™ºèƒ½ç¼“å­˜** - LRU ç¼“å­˜ + TTL è¿‡æœŸï¼Œæ€§èƒ½æå‡ 50-80%
- ğŸ›¡ï¸ **ç»Ÿä¸€é”™è¯¯å¤„ç†** - 14 ç§é”™è¯¯ç±»å‹ï¼Œå¿«é€Ÿå®šä½é—®é¢˜
- ğŸ“Š **æ€§èƒ½ç›‘æ§** - å®æ—¶æŒ‡æ ‡ã€æ…¢æ“ä½œæ£€æµ‹ã€æ€§èƒ½æŠ¥å‘Š
- ğŸ”— **ä¾èµ–ç®¡ç†** - è‡ªåŠ¨è§£æä¾èµ–å…³ç³»ã€å¾ªç¯ä¾èµ–æ£€æµ‹
- ğŸ“¦ **æ’ä»¶å¸‚åœº** - æœç´¢ã€å®‰è£…ã€æ›´æ–°æ’ä»¶
- ğŸ”„ **ç‰ˆæœ¬æ§åˆ¶** - è‡ªåŠ¨å¤‡ä»½ã€ç‰ˆæœ¬æ¢å¤ã€å®Œæ•´æ€§éªŒè¯
- ğŸ¯ **TypeScript æ”¯æŒ** - å®Œæ•´ç±»å‹å®šä¹‰
- ğŸ§ª **é«˜æµ‹è¯•è¦†ç›–** - 58+ å•å…ƒæµ‹è¯•ç”¨ä¾‹

**å†…ç½®æ’ä»¶ç¤ºä¾‹**ï¼š
- ğŸ“ **Notes** - ç¬”è®°ç®¡ç†æ’ä»¶ï¼ˆæ–°å¢å¯¼å…¥/å¯¼å‡º/æ ‡ç­¾/ç»Ÿè®¡ï¼‰
- ğŸ”¢ **Calculator** - è®¡ç®—å™¨æ’ä»¶ï¼ˆæ”¯æŒæ•°å­¦è¡¨è¾¾å¼ï¼‰
- ğŸŒ **Translator** - ç¿»è¯‘æ’ä»¶ï¼ˆå¤šè¯­è¨€æ”¯æŒï¼‰
- ğŸš€ **Advanced Example** - é«˜çº§ç¤ºä¾‹æ’ä»¶ï¼ˆæ¼”ç¤ºå„ç§ç‰¹æ€§ï¼‰

è¯¦ç»†æ–‡æ¡£ï¼š`docs/PLUGIN_SYSTEM_FINAL_OPTIMIZATION.md`

### åˆ†æ”¯ç®¡ç†ï¼ˆæ–°åŠŸèƒ½ï¼‰
| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `/branch` | åˆ†æ”¯ç®¡ç†ä¸»å‘½ä»¤ |
| `/branch list` | åˆ—å‡ºæ‰€æœ‰åˆ†æ”¯ |
| `/branch create <desc>` | åˆ›å»ºæ–°åˆ†æ”¯ |
| `/branch switch <id>` | åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯ |
| `/branch delete <id>` | åˆ é™¤åˆ†æ”¯ |
| `/branch compare <id1> <id2>` | æ¯”è¾ƒä¸¤ä¸ªåˆ†æ”¯ |
| `/branch merge <src> <dst>` | åˆå¹¶åˆ†æ”¯ |
| `/branch tree` | æ˜¾ç¤ºåˆ†æ”¯æ ‘ç»“æ„ |
| `/branch cleanup` | æ¸…ç†å­¤ç«‹åˆ†æ”¯ |

## ğŸ”’ å®‰å…¨æ€§è¯´æ˜

xzChat å†…ç½®äº†å¤šå±‚å®‰å…¨ä¿æŠ¤ï¼š

1. **æ•æ„Ÿä¿¡æ¯è¿‡æ»¤**: è‡ªåŠ¨æ£€æµ‹å¹¶è¿‡æ»¤æ—¥å¿—ä¸­çš„ API Keyã€å¯†ç ç­‰æ•æ„Ÿä¿¡æ¯
2. **è·¯å¾„éå†é˜²æŠ¤**: ä¸¥æ ¼éªŒè¯æ–‡ä»¶è·¯å¾„ï¼Œé˜²æ­¢è®¿é—®ç³»ç»Ÿæ•æ„Ÿç›®å½•
3. **å‘½ä»¤å®‰å…¨æ£€æŸ¥**: æ£€æµ‹å±é™©å‘½ä»¤ï¼ˆå¦‚ `rm -rf /`ï¼‰å¹¶ç»™å‡ºè­¦å‘Š
4. **æ•æ„Ÿæ–‡ä»¶è­¦å‘Š**: è®¿é—® `.env`ã€`.key` ç­‰æ–‡ä»¶æ—¶ä¼šç»™å‡ºè­¦å‘Šæç¤º

## ğŸ“Š æ—¥å¿—ç³»ç»Ÿ

xzChat ä½¿ç”¨ç»“æ„åŒ–æ—¥å¿—ç³»ç»Ÿï¼Œæ”¯æŒä»¥ä¸‹æ—¥å¿—çº§åˆ«ï¼š

- `DEBUG`: è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯ï¼ˆé»˜è®¤å…³é—­ï¼‰
- `INFO`: ä¸€èˆ¬ä¿¡æ¯ï¼ˆé»˜è®¤ï¼‰
- `WARN`: è­¦å‘Šä¿¡æ¯
- `ERROR`: é”™è¯¯ä¿¡æ¯

è®¾ç½®æ—¥å¿—çº§åˆ«ï¼š

```bash
# é€šè¿‡ç¯å¢ƒå˜é‡
export XZCHAT_LOG_LEVEL=DEBUG

# æ—¥å¿—æ–‡ä»¶ä½ç½®: ~/.newapi-chat-logs/xzchat-YYYY-MM-DD.log
```

## ğŸ› ï¸ å¼€å‘

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/yourusername/xzChat.git
cd xzChat

# å®‰è£…ä¾èµ–
npm install

# é“¾æ¥åˆ°å…¨å±€ï¼ˆä¾¿äºå¼€å‘æµ‹è¯•ï¼‰
npm link

# è¿è¡Œ
xzChat
```

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# è¿è¡Œç‰¹å®šæµ‹è¯•
npm test -- tests/unit/plugin-errors.test.js

# æŸ¥çœ‹è¦†ç›–ç‡
npm test -- --coverage
```

### æ’ä»¶å¼€å‘

è¯¦ç»†æ–‡æ¡£ï¼š

- **ğŸ‡¨ğŸ‡³ æ’ä»¶å¿«é€Ÿå…¥é—¨ï¼ˆä¸­æ–‡ï¼‰** - `docs/PLUGIN_QUICKSTART_CN.md`
- **ğŸ‡¬ğŸ‡§ Plugin Quickstart (English)** - `docs/PLUGIN_QUICKSTART.md`
- **æ’ä»¶ç³»ç»Ÿæœ€ç»ˆä¼˜åŒ–** - `docs/PLUGIN_SYSTEM_FINAL_OPTIMIZATION.md`
- **æ’ä»¶ä¼˜åŒ–æ€»ç»“** - `docs/PLUGINS_OPTIMIZATION_SUMMARY.md`
- **æ’ä»¶ä»£ç å®¡æŸ¥** - `docs/PLUGIN_CODE_REVIEW.md`
- **æ’ä»¶æ¼”è¿›å†å²** - `docs/PLUGIN_SYSTEM_EVOLUTION.md`
- **ä¼˜åŒ–å®Œæˆæ€»ç»“** - `docs/OPTIMIZATION_COMPLETE_SUMMARY.md`

**æ¼”ç¤ºè„šæœ¬**ï¼š

```bash
# è¿è¡Œæ’ä»¶ç³»ç»ŸåŠŸèƒ½æ¼”ç¤º
node examples/demo-optimized-features.js

# è¿è¡Œæ’ä»¶ç³»ç»Ÿç¬¬ä¸‰é˜¶æ®µæ¼”ç¤º
node examples/demo-plugin-features.js
```

**TypeScript ç±»å‹å®šä¹‰**ï¼š

æ‰€æœ‰æ’ä»¶ç›¸å…³ç±»å‹å®šä¹‰ä½äº `types/plugin-system.d.ts`ï¼ŒåŒ…å«ï¼š
- IPlugin, IPluginMetadata, IPluginManager
- IDependencyManager, IMarketplace, IVersionManager
- IPerformanceMonitor, IPluginValidator
- æ‰€æœ‰é”™è¯¯ç±»å‹

## ğŸ¤ è´¡çŒ® (Contributing)

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æäº¤ Pull Request

## ğŸ“„ License

[MIT](LICENSE) Â© xiaozhou

## ğŸ™ è‡´è°¢

- [OpenAI](https://openai.com/) - æä¾›å¼ºå¤§çš„ AI API
- [Anthropic](https://www.anthropic.com/) - Claude æ¨¡å‹æ”¯æŒ
- [Node.js](https://nodejs.org/) - è¿è¡Œæ—¶ç¯å¢ƒ
- æ‰€æœ‰è´¡çŒ®è€…

---

**å¦‚æœä½ è§‰å¾— xzChat å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™å®ƒä¸€ä¸ª â­ï¸ Starï¼**
